function CustomEvent(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}!function(a,b){"use strict";var c=".",d=".spa-layout",e=function(b){var c=new e.fn.init,d="";if(c.settings=$.extend({},c.settings,b),c.getParameterByName(c.settings.forceReload))return a.location.replace(a.location.href.split("?")[0]+"#!"+c.getParameterByName(c.settings.forceReload)),c;if(c.settings.AppContext)c.$context=c.settings.AppContext;else{var f=document.querySelector("[spa-app]");if(!f)throw console.error("Must have an application context defined"),new ReferenceError("Must have an application context defined");d=a[f.getAttribute("spa-app")],"function"==typeof d&&(d=d()),c.$context=d}return c.viewEngine=c.settings.viewEngine,c.AppContext=c.settings.AppContext,c.analytics=c.settings.analytics,c.titleElement=document.querySelector(c.settings.titleSelector),c.settings.parseDOM&&(c.AppContext.parsingEnd(),c.settings.initView&&c.swapView()),a.addEventListener("hashchange",function(){c.swapView()}),c};return e.fn=e.prototype={constructor:e,init:function(){return this},version:"0.1.2",viewEngine:b,$context:b,$controller:b,$oldController:b,oldRoute:b,matchRouteByPath:function(a,c){c||(c=this.viewEngine.getRoutes());var d,e,f,g,h,i={};if(c.hasOwnProperty(a))return c[a];console.log("path: ",a);for(d in c)if(c.hasOwnProperty(d)){if(e=c[d],h=new RegExp("\\b"+e.path+"\\b","gi"),""!==e.path&&0===a.search(h)){for(f=a.replace(e.path,"").split("/").slice(1),g=0;g<f.length;g++)i[e.params[g]]=f[g];e.paramValues=i;break}e=b}return e},matchRouteById:function(a,b){b||(b=this.viewEngine.getRoutes());var c;for(c in b)if(b[c].viewId===a)return b[c]},animation:b,getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},getVendorPropertyName:function(a){var b,c,d=["Moz","Webkit","O","ms"],e=a.charAt(0).toUpperCase()+a.substr(1);if(a in this.div.style)return a;for(c=0;c<d.length;++c)if(b=d[c]+e,b in this.div.style)return b},transitionend:{animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd"},cssPrefix:function(a){if(!a)return"";var b,c,d,e,f=document.body.style;if(a.indexOf("-")>=0){for(d=(""+a).split("-"),b=1,c=d.length;c>b;b++)d[b]=d[b].substr(0,1).toUpperCase()+d[b].substr(1);a=d.join("")}if(a in f)return a;for(a=a.substr(0,1).toUpperCase()+a.substr(1),e=["webkit","Moz","ms","O"],b=0,c=e.length;c>b;b++)if(e[b]+a in f)return e[b]+a;return""},removeExtraViews:function(a){if(a)for(var b=a.length;b>1;)b--,a[b].parentNode.removeChild(a[b]);return a[0]},pushView:function(a){var b=this;b.analytics&&b.analytics.pushView(["_trackPageview",a])},getHashPath:function(){var b="#"!==a.location.hash?a.location.hash.replace("#!",""):"";return b=b.split(":")[0],b=b.replace(new RegExp("\\\\$"),"")},getClassSelector:function(a){return c+a},getOldRoute:function(a){return a?this.matchRouteById(a):b},getController:function(a){var b=this,c=b.$context[a.viewId];return c&&"function"==typeof c?c=new c(b.$context,a):c&&"object"==typeof c?(c=new c,c.response=a,c):void 0},getExistingView:function(a){var b=this;return view=document.querySelector(c+b.settings.currentLayoutClass),view||(view=document.querySelector(c+b.settings.currentViewClass)),view},swapView:function(){var e,f,g,h,i,j=this,k=j.settings,l=b,m=j.getParameterByName("_escaped_fragment_"),n=j.getHashPath(),o="show",p=j.matchRouteByPath(n);if(!p||""!==m)return void(a.location.hash="#!"+k.NotFoundRoute);if(h=document.querySelectorAll(c+k.layoutClass),i=document.querySelectorAll(c+k.currentViewClass),h&&h.length>0&&(h=j.removeExtraViews(h)),i&&i.length>0&&(i=j.removeExtraViews(i),l=i?i.id:b),0===i.length&&(i=b),j.oldRoute!==n){if(h&&(h.length!==b&&(h=0===h.length?b:h[0]),h&&h.getAttribute(j.settings.layoutClass)!==p.layout&&(i=h)),j.$oldController=j.$controller,j.$controller=j.getController(p),!j.$controller)return void(a.location.hash="#!"+k.NotFoundRoute);j.pushView(n),f=j.stampView(i,p),e=j.getAnimation(p),j.animation=e,f&&(i?(j.makeViewCallback(j.$oldController,"beforeunload"),j.hasAnimations()&&(e?(i.addEventListener(j.transitionend[j.cssPrefix("animation")],function(a){j.endSwapAnimation(j.oldRoute,p,i),g=b}),$(i).addClass("animated out "+e).removeClass("in"),$(f).addClass(k.currentViewClass+" show animated "+e+" in"),$(d).addClass(o)):($(f).addClass(k.currentViewClass),$(d).addClass(o),j.endSwapAnimation(j.oldRoute,p,i)))):k.intoAnimation?(f.addEventListener(j.transitionend[j.cssPrefix("animation")],function(a){j.endSwapAnimation.call(j,j.oldRoute,p,g),g=b}),$(f).addClass(k.currentViewClass+" show animated "+e+" in"),$(d).addClass(o)):($(f).addClass(k.currentViewClass+" show"),j.endSwapAnimation.call(j,j.oldRoute,p,g),$(d).addClass(o)),j.setDocumentTitle(p),p&&j.$controller&&(j.makeViewCallback(j.$controller,"beforeonload",p),j.makeViewCallback(j.$controller,"onload",p),j.makeViewCallback(j.$controller,"afteronload",p))),j.oldRoute=n}},getAnimation:function(a){return a?this.animations[a.transition]||this.settings.viewTransition:this.settings.viewTransition},endSwapAnimation:function(a,b,c){var d,e=this,f=document.getElementById(b.viewId),g=e.animation;a&&(e.makeViewCallback(e.$oldController,"unload"),e.makeViewCallback(e.$oldController,"afterunload")),f&&f.classList.contains("in")&&(f.classList.remove("in"),f.classList.remove(g)),c&&e.viewEngine&&c.parentNode&&(d=c.parentNode,d.removeChild(c))},stampView:function(b,c){var d,e,f,g,h=this,i="[spa-layout='"+c.layout+"']";return h.viewEngine&&(d=h.viewEngine.getView(c.viewId),d?f=h.createFragment(d):(g=a.location.href.split("#!"),a.location.replace(g[0]+"?"+h.settings.forceReload+"="+g[1])),c.layout?(e=document.querySelector(i),e?(g=e.querySelector(h.settings.layOutPlaceholder),b&&!b.classList.contains(h.settings.layoutClass)?g.insertBefore(f,b):g.appendChild(f)):(e=h.viewEngine.getView(c.layout),e&&(e=h.createFragment(e),g=document.querySelector(h.settings.mainWrappperSelector),g.appendChild(e),e=document.querySelector(i),g=e.querySelector(h.settings.layOutPlaceholder),g.appendChild(f)))):(g=document.querySelector(h.settings.mainWrappperSelector),b?g.insertBefore(f,b):g.appendChild(f))),document.querySelector(c.spaViewId)},makeViewCallback:function(a,b,c){a&&a[b]&&a[b].call(a,c||{})},setDocumentTitle:function(a){var b,c=a.title;if(c&&""!==c){for(b=0;b<a.params.length;b++)c=c.replace(":"+a.params[b],a.paramValues[a.params[b]]);document.title=c}},createFragment:function(a){var b=document.createDocumentFragment(),c=document.createElement("div");for(c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild);return b},hasAnimations:function(){var a=!1,c=document.createElement("div"),d="animation",e="",f="Webkit Moz O ms Khtml".split(" "),g="",h=0;if(c.style.animationName&&(a=!0),a===!1)for(h=0;h<f.length;h++)if(c.style[f[h]+"AnimationName"]!==b){g=f[h],d=g+"Animation",e="-"+g.toLowerCase()+"-",a=!0;break}return a},animations:{slide:"slide",fade:"fade",flip:"flip"},settings:{routes:[],viewSelector:".spa-view",currentViewClass:"spa-current-view",currentLayoutClass:"spa-current-layout",layoutClass:"spa-layout",layOutPlaceholder:".spa-child-view",viewClass:"spa-view",mainWrappperSelector:".main-content",NotFoundView:"nofoundView",NotFoundRoute:"404",defaultTitle:"A Single Page Application with Routes",titleSelector:".view-title",forceReload:"_force_reload_",autoSetTitle:!0,parseDOM:!0,initView:!0,transitionFullLayout:!0,intoAnimation:!0,viewTransition:"slide",asyncUrl:b}},e.fn.init.prototype=e.fn,a.SPA=e}(window),function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}(),function(){"use strict";var a=Class.extend({init:function(a,b){if(!a)throw new ReferenceError("The rootScope must be supplied to have a valid view");this.response=b,this.rootScope=a},rootScope:void 0,response:void 0,bind:function(a,b){var c=this;if(!c.rootScope||!c.rootScope.viewEngine)throw{Title:"Missing viewEngine",Message:"There is no accessible viewEngine"};c.rootScope.viewEngine.bind(a,b)},version:"0.5.1",noResults:"<div class='no-results'>Sorry There are No Results Available</div>",mainTitle:document.querySelector(".view-title"),getRoute:function(){return void 0!==this.response?this.response.path:window.location.hash.replace("#!","")},getPath:function(){return window.location.hash.replace("#!","")},getParams:function(){var a=this.getPath(),b=a.split("/:").slice(1);return b},newRoute:function(a){window.location.hash="#!"+a}});return window.Controller=a}(),!function(a,b){"use strict";var c=function(a,b){var d,e,f=new c.fn.init(a,b);if(!a)return f.length=0,f;if("string"==typeof a)for(d=b&&b.nodeType?b.querySelectorAll(a):document.querySelectorAll(a),f.length=d.length,f.selector=a,e=0;e<d.length;e++)f[e]=d[e];else a.nodeType&&(f[0]=a,f.length=a.length?a.length:1);return f};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.5",length:0,context:b,selector:"",rclass:/[\t\r\n]/g},c.trim=function(a){return null==a?"":a.trim(a)},c.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c.isPlainObject=function(a){return"object"!=typeof a||a.nodeType||a===a.window?!1:!a.constructor||Object.prototype.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf")},c.merge=function(){},c.each=function(a,c){if(c===b&&(c=a,a=this),this.isArray(a))for(var d=0,e=a.length;e>d;d++);},c.map=function(a,b){var c,d=0,e=a.length,f=this.isArray(a),g=[];if(f)for(;e>d;d++)c=b(a[d],d,arg),null!=c&&(g[g.length]=c);else for(d in a)c=b(a[d],d,arg),null!=c&&(g[g.length]=c);return g},c.grep=function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},c.noop=function(){},c.fn.init.prototype=c.fn,a.dollarbill=a.$=c}(window),dollarbill.parseLocalStorage=function(a){var b=localStorage.getItem(a);return b?JSON.parse(b)||{}:{}},dollarbill.fn.removeClass=function(a){if(a&&"string"==typeof a){for(var b=0;b<this.length;b++)for(var c=a.split(" "),d=0;d<c.length;d++)""!==c[d]&&this[b].classList.remove(c[d]);return this}},dollarbill.fn.addClass=function(a){if(a&&"string"==typeof a){for(var b=0;b<this.length;b++)for(var c=a.split(" "),d=0;d<c.length;d++)""!==c[d]&&this[b].classList.add(c[d]);return this}},dollarbill.fn.hasClass=function(a){return a&&"string"==typeof a?this[0].classList.contains(a):this},dollarbill.fn.toggleClass=function(a){if(a&&"string"==typeof a){for(var b=0;b<this.length;b++)this[b].classList.toggle(a);return this}},dollarbill.fn.show=function(a){a=a||"block";for(var b=0;b<this.length;b++)this[b].style.display=a},dollarbill.fn.hide=function(){for(var a=0;a<this.length;a++)this[a].style.display="none"},dollarbill.fn.toggle=function(a){a=a||"block";for(var b=0;b<this.length;b++){var c=this[b];c.style.display=""===c.style.display||"none"===c.style.display?a:"none"}},dollarbill.getVendorPropertyName=function(a){var b,c,d=["Moz","Webkit","O","ms"],e=document.createElement("div"),f=a.charAt(0).toUpperCase()+a.substr(1);if(a in e.style)return a;for(c=0;c<d.length;++c)if(b=d[c]+f,b in e.style)return b},dollarbill.hideURLBar=function(){var a=window,b=document,c=b.body,d=document.height>a.innerHeight?document.height:a.innerHeight,e=a.pageYOffset||"CSS1Compat"===b.compatMode&&b.documentElement.scrollTop||b.body.scrollTop||0;430>d&&(d=430),d>c.clientHeight&&(c.style.height=d+"px"),window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,e)},0)})},dollarbill.transitionend={animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd"},dollarbill.checkTransform3dSupport=function(){var a=document.createElement("div"),b=this.getVendorPropertyName("transform");return a.style[b]="",a.style[b]="rotateY(90deg)",""!==a.style[b]},dollarbill.buildVendorNames=function(){return{transition:this.getVendorPropertyName("transition"),transitionDelay:this.getVendorPropertyName("transitionDelay"),transform:this.getVendorPropertyName("transform"),transformOrigin:this.getVendorPropertyName("transformOrigin"),transform3d:this.checkTransform3dSupport()}},dollarbill.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},dollarbill.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},dollarbill.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"!=typeof g&&"function"!=typeof g&&(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(dollarbill.isPlainObject(d)||(e=dollarbill.isArray(d)))?(e?(e=!1,f=c&&dollarbill.isArray(c)?c:[]):f=c&&dollarbill.isPlainObject(c)?c:{},g[b]=dollarbill.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},dollarbill.fn.css=function(a,b){if(0!==this.length){for(var c,d,e=0;e<this.length;e++){if(c=this[e],"string"==typeof a&&!b)return c.style[a];if("string"==typeof a&&b&&(c.style[a]=b),"object"==typeof a)for(d in a)c.style[d]=a[d]}return this}},dollarbill.fn.height=function(a){return a?(this.length>0&&(this[0].style.height=a),this):0===this.length?window.style.height:this[0].style.height},dollarbill.fn.width=function(a){return a?(this.length>0&&(this[0].style.clientWidth=a),this):0===this.length?window.style.clientWidth:this[0].style.clientWidth},dollarbill.fn.innerHeight=function(){return 0===this.length?window.innerHeight:this[0].innerHeight},dollarbill.fn.innerWidth=function(){return 0===this.length?window.innerWidth:this[0].offsetWidth},dollarbill.fn.offset=function(){if(0!==this.length){var a=this[0].getBoundingClientRect();return{top:a.top+window.pageYOffset,left:a.left+window.pageXOffset}}},dollarbill.fn.outerHeight=function(){return 0===this.length?window.outerHeight:this[0].getBoundingClientRect().height},dollarbill.fn.outerWidth=function(){return 0===this.length?window.outerWidth:this[0].getBoundingClientRect().width},dollarbill.fn.position=function(){return this[0]?this[0].getBoundingClientRect():void 0},dollarbill.fn.attr=function(a,b){if(!a)return this;if(!b)return this[0].getAttribute(a);for(var c=0;c<this.length;c++)this[c].setAttribute(a,b);return this},dollarbill.fn.html=function(a){if(!this[0])return this;var b=0;if(void 0===a)return this[0].innerHTML;for(;b<this.length;b++)this[b].innerHTML=a;return this},dollarbill.fn.removeAttr=function(a){if(!this[0])return this;for(var b=0;b<this.length;b++)this[b].removeAttribute(a);return this},dollarbill.fn.data=function(a,b){var c=this[i];return b?void c.setAttribute("data-"+a,b):c.hasAttribute("data-"+a)?c.getAttribute("data-"+a):""},window.CustomEvent||(CustomEvent.prototype=window.CustomEvent.prototype,window.CustomEvent=CustomEvent),dollarbill.fn.on=function(a,b,c){c=c===!0;for(var d=0;d<this.length;d++)this[d].addEventListener(a,b,c)},dollarbill.fn.off=function(a,b,c){for(var d=0;d<this.length;d++)this[d].removeEventListener(a,b,c)},dollarbill.fn.trigger=function(a,b){if(!a)return this;for(var c=0,d=new CustomEvent(a,b);c<this.length;c++)elem.dispatchEvent(d)},dollarbill.fn.after=function(a){if(!a)return this;"string"==typeof a&&(a=document.createDocumentFragment(a));for(var b=0;b<this.length;b++)this[b].parentNode&&this[b].parentNode.insertBefore(a,this[b].nextSibling);return this},dollarbill.fn.append=function(a){if(!a)return this;a.nodeType||"string"!=typeof a||(a=document.createElement(a));for(var b=0;len>b;b++)this[b].appendChild(a);return this},dollarbill.fn.appendTo=function(a){if(!a)return this;"string"==typeof a&&(a=document.querySelectorAll(a)),a.length||(a=[a]);for(var b=0,c=0;b<a.length;b++)for(;c<this.length;c++)a[b].appendChild(this[c])},dollarbill.fn.before=function(a){if(!a)return this;"string"==typeof a&&(a=document.createDocumentFragment(a));for(var b=0;b<this.length;b++)this[0].parentNode.insertBefore(a,this[0]);return this},dollarbill.fn.clone=function(a){return 0!==this.length?this[0].cloneNode(a):void 0},dollarbill.fn.detach=function(a){return this.remove(a)},dollarbill.fn.empty=function(){for(var a=0;a<this.length;a++)this[a].innerHTML=null;return this},dollarbill.fn.insertAfter=function(a){return a.parentNode.insertBefore(this,a.nextSibling),this},dollarbill.fn.insertBefore=function(a,b){b||(b=this[0]),a.length||(a=[a]);for(var c=0;c<a.length;c++)a[c].parentNode.insertBefore(a[c],b);return this},dollarbill.fn.prepend=function(a){if(!a)return this;"string"==typeof a&&(a=document.createDocumentFragment(a));for(var b,c=0;c<this.length;c++)b=this[0],(1===b.nodeType||11===b.nodeType||9===b.nodeType)&&b.insertBefore(a,b.firstChild);return this},dollarbill.fn.prependTo=function(a){if(!a)return this;"string"==typeof a&&(a=document.querySelectorAll(c)),a.length||(a=[a]);for(var b=0,c=this[0];b<a.length;b++)(1===a.nodeType||11===a.nodeType||9===a.nodeType)&&a.insertBefore(c,a.firstChild);return this},dollarbill.fn.remove=function(){var a,b,c;for(a=0;a<this.length;a++)b=this[a],c=b.parentNode.removeChild(b),c=null;return this},dollarbill.fn.replaceAll=function(a){if(0===this.length||!a)return this;"string"==typeof a&&(a=document.querySelectorAll(a));for(var b=0,c=0;b<a.length;b++)for(;c<this.length;c++)this[b].parentNode.replaceChild(this[b],a);return this},dollarbill.fn.replaceWith=function(a){if(!a)return this;a.nodeType||"string"!=typeof a||(a=document.createElement(a));for(var b=0;len>b;b++)this[b].parentNode.replaceChild(a,this[b]);return this},dollarbill.fn.text=function(a){0===this.length;var b=this[0],c=b.nodeType;if(a)1===c||9===c||11===c?b.textContent=a:(3===c||4===c)&&(b.nodeValue=a);else{if(1===c||9===c||11===c)return b.textContent;if(3===c||4===c)return b.nodeValue}return""},dollarbill.fn.parent=function(a){return a.length||(a=[a]),a[0].parentNode},dollarbill.fn.prev=function(){return c.length||(c=[c]),c[0].previousElementSibling},dollarbill.fn.next=function(){return c.length||(c=[c]),c[0].nextElementSibling},dollarbill.fn.loadScript=function(a,b,c){if(document.getElementById(a))c();else{var d=document.createElement("script");d.type="text/javascript",d.id=a,d.readyState?d.onreadystatechange=function(){("loaded"===d.readyState||"complete"===d.readyState)&&(d.onreadystatechange=null,c())}:d.onload=function(){c()},d.src=b,document.body.appendChild(d)}},function(a,b){"use strict";var c=/(.)^/,d={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},e=/\\|'|\r|\n|\u2028|\u2029/g,f=function(a){return"\\"+d[a]},g=function(a){return new g.fn.init(a)};return g.fn=g.prototype={constructor:g,init:function(a){var b,c=this;for(b in a)c[b]=a[b];return c},version:"0.0.2",appName:"spa app",appPrefix:"spaApp-",cache:b,ViewSelector:"script[class='spa-view']",LayoutSelector:"script[class='spa-layout']",cssSelector:"script[type='x-spa-css']",scriptSelector:"script[type='x-spa-js']",TemplateSelector:"[type='text/x-simpleTemplate-template']",scriptLoadingState:0,assetsComplete:function(){},getAttributeDefault:function(a,b,c){return a.hasAttribute(b)?a.getAttribute(b):c},createFragment:function(a){var b=document.createElement("div");return b.innerHTML=a,b},loadImport:function(a,b){var c=this;c.getImport(a,function(a){c.processSPA(a,b)})},getImport:function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onload=function(){if(c.status>=200&&c.status<400){var a=c.responseText.replace(/(\r\n|\n|\r)/gm,"");b&&b(a)}},c.onerror=function(){},c.send()},processSPA:function(a,c,d){"function"==typeof a&&(d=a,a=b),this.parseViews(a,!0),this.parseCSS(a),this.parseScripts(a),this.parseTemplates(a,!0),d&&d()},setupAssets:function(a){var b,c=this,d=c.cache.getObject(c.appPrefix+"-scripts"),e=c.cache.getObject(c.appPrefix+"-css");c.assetsComplete=a;for(b in d)c.appendScript(d[b]);for(b in e)c.appendCSS(e[b]);c.assetsComplete()},parseViews:function(a,c){var d,e,f,g,h=this,i=h.cache.getObject(h.appPrefix+"views")||{},j=document;for(c===b&&(c=!0),a!==b&&"string"!=typeof a&&("boolean"==typeof a?c=a:a=b),"string"==typeof a&&(j=document.createElement("div"),j.innerHTML=a),g=j.querySelectorAll(h.ViewSelector+", "+h.LayoutSelector),h.setupRoutes(g),d=0;d<g.length;d++)e=g[d],f=e.innerHTML.replace(/(\r\n|\n|\r)/gm,""),i[e.id]=f,c===!0&&e.parentNode&&e.parentNode.removeChild(e);h.cache.setObject(h.appPrefix+"views",i)},getView:function(a){var b=this.cache.getObject(this.appPrefix+"views")||{};return b[a]},parseTemplates:function(a,b){var c,d,e=this,f=[],g=document,h=e.getTemplates();"string"==typeof a&&(g=document.createElement("div"),g.innerHTML=a),f=g.querySelectorAll(e.TemplateSelector);for(var i=0;i<f.length;i++)c=f[i],d=c.innerHTML.replace(/(\r\n|\n|\r)/gm,""),h[c.id]=d,b===!0&&c.parentNode&&c.parentNode.removeChild(c);e.cache.setObject(e.appPrefix+"templates",h)},getTemplates:function(){return this.cache.getObject(this.appPrefix+"templates")||{}},getTemplate:function(a){var b=JSON.parse(localStorage.getItem(this.appPrefix+"templates"))||{};return b[a]},parseCSS:function(a){var b=this,c=b.cache.getObject(b.appPrefix+"css")||{},d={};if(a||(a=document.querySelector(b.cssSelector))){if("string"==typeof a){var e=document.createElement("div");e.innerHTML=a,a=e.querySelector(b.cssSelector)}""!==a.innerHTML&&(d=JSON.parse(a.innerHTML)),c=$.extend(c,d);for(var f in c)b.appendCSS(c[f]);b.cache.setObject(b.appPrefix+"css",c)}},appendCSS:function(a){var b;document.getElementById(a.id)||(b=document.createElement("link"),b.id=a.id,b.rel="stylesheet",b.type="text/css",b.href=a.url,document.head.appendChild(b))},parseScripts:function(a){var b=this,c=b.cache.getObject(b.appPrefix+"-scripts")||{},d={};if(a||(a=document.querySelector(b.scriptSelector))){if("string"==typeof a){var e=document.createElement("div");e.innerHTML=a,a=e.querySelector(b.scriptSelector)}""!==a.innerHTML&&(d=JSON.parse(a.innerHTML)),c=$.extend(c,d);for(var f in c)b.appendScript(c[f]);b.cache.setObject(b.appPrefix+"-scripts",d)}},appendScript:function(a){var b,c=this;document.getElementById(a.id)||(c.scriptLoadingState+=1,b=document.createElement("script"),b.type="text/javascript",b.id=a.id,b.src=a.url,b.onload=function(a){c.scriptLoadingState-=1},document.body.appendChild(b))},setupRoutes:function(a){var c,d,e,f,g=this,h=g.getRoutes(),i=0;for(a.length===b&&(a=[a]);i<a.length;i++)d=a[i],d.hasAttributes()&&d.hasAttribute("id")&&(f=d.getAttribute("id"),c=g.getAttributeDefault(d,"spa-route",""),e=g.createRoute(f,c,d),e&&(h[e.path]=e));g.cache.setObject(g.appPrefix+"routes",h)},createRoute:function(a,c,d){var e=this,f={viewId:a,viewModule:e.getAttributeDefault(d,"spa-module",a),path:c.split("/:")[0],params:c.split("/:").slice(1),spaViewId:e.getAttributeDefault(d,"spa-view-id","#"+a),title:e.getAttributeDefault(d,"spa-title",""),viewType:e.getAttributeDefault(d,"spa-view-type","view"),layout:e.getAttributeDefault(d,"spa-layout",b),transition:e.getAttributeDefault(d,"spa-transition",""),paramValues:{},beforeonload:e.getAttributeDefault(d,"spa-beforeonload",b),onload:e.getAttributeDefault(d,"spa-onload",b),afteronload:e.getAttributeDefault(d,"spa-afteronload",b),beforeunload:e.getAttributeDefault(d,"spa-beforeunload",b),unload:e.getAttributeDefault(d,"spa-unload",b),afterunload:e.getAttributeDefault(d,"spa-afterunload",b)};return"view"===f.viewType?f:void 0},getRoutes:function(){return JSON.parse(localStorage.getItem(this.appPrefix+"routes"))||{}},templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},template:function(a,b,d){!b&&d&&(b=d),b=$.extend({},b,this.templateSettings);var g=RegExp([(b.escape||c).source,(b.interpolate||c).source,(b.evaluate||c).source].join("|")+"|$","g"),h=0,i="__p+='";a.replace(g,function(b,c,d,g,j){return i+=a.slice(h,j).replace(e,f),h=j+b.length,c?i+="'+\n((__t=("+c+"))==null?'':encodeURIComponent(__t))+\n'":d?i+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(i+="';\n"+g+"\n__p+='"),b}),i+="';\n",b.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";var j;try{j=new Function(b.variable||"obj","_",i)}catch(k){throw k.source=i,k}var l=function(a){return j.call(this,a)},m=b.variable||"obj";return l.source="function("+m+"){\n"+i+"}",l},render:function(a,b){var c=this.template(a);return c(b)},bind:function(c){if("string"!=typeof c.targetSelector||"string"!=typeof c.templateName||c.data===b)throw new Error("missing argument in mergeData");var d=this,e=document.querySelector(c.targetSelector),f=d.getTemplates();return new Promise(function(b,g){return e?(e.length&&e.length>0&&(e=e[0]),void(f[c.templateName]?a.requestAnimationFrame?requestAnimationFrame(function(){e.innerHTML=d.render(f[c.templateName],c.data),b()}):(e.innerHTML=d.render(f[c.templateName],c.data),b()):g(Error("no matching template")))):void console.error("could not find view engine target ",c.targetSelector)})}},g.fn.init.prototype=g.fn,a.simpleViewEngine=g}(window),function(a,b){var c=function(a){var b=new c.fn.init;return a&&("sessionStorage"!==a.storageType?(b.storageType="localStorage",b.storage=localStorage):(b.storageType=a.storageType||b.storageType,b.storage=sessionStorage),b.ttlKey=a.ttlKey||b.ttlKey),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",setItem:function(a,b,c){var d=this;if(!a)throw new{Message:"Item must have a key"};if(!b)throw new{Message:"Item must have a value"};"Object"==typeof b&&(b=JSON.stringify(b)),d.storage.setItem(a,b),c&&d.storage.setItem(d.ttlKey+a,+new Date+c)},getItem:function(b){var c=this,d=c.storage.getItem(c.ttlKey+b),e=null!==d&&!c.hasItemExpired(b,d);return!a.online||e?c.storage.getItem(b):(a.online===!0&&e&&(c.storage.removeItem(b),c.storage.removeItem(c.ttlKey+b)),null)},hasItemExpired:function(a,b){var c=this;return!b||b<+new Date?(c.storage.removeItem(a),c.storage.removeItem(c.ttlKey+a),!0):!1},getObject:function(a){try{return JSON.parse(this.getItem(a))}catch(b){return null}},setObject:function(a,b,c){"object"==typeof b&&(b=JSON.stringify(b)),this.setItem(a,b,c)},removeItem:function(a){this.storage.removeItem(a),this.storage.removeItem(this.ttlKey+a)},clear:function(){this.storage.clear()},getTTLConstant:function(a){switch(a){case"week":return 6048e5;case"day":return 864e5;case"hour":return 36e5;case"minute":return 3600}return 0},storage:localStorage,storageType:"localStorage",ttlKey:"l2S-Cache-"},c.fn.init.prototype=c.fn,a.l2Storeagecache=c}(window),function(a,b){"use strict";var c=function(a,b){if(!a)return a;if("string"==typeof a&&(a=document.querySelector(a),!a))return a;"length"in a&&(a=a[0]);var d=new c.fn.init,e=d.settings=$.extend({},d.settings,b);return d.support=$.buildVendorNames(),d.support.transitionEnd=d.eventNames[d.support.transition]||null,d.setupToolbarElements(a,e),d.applyTransitionEnd(),d.setToolbarMenu(e.menuItems),d};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.4",toolbar:b,topMenu:b,subMenu:b,expandTarget:b,hasMouse:"",touchType:"",touchStart:"",div:b,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},setToolbarMenu:function(b){var c=0,d="",e="",f=this,g=f.settings;if(f.expandToolbar(!0),f.topMenu.innerHTML="",f.subMenu.innerHTML="",b.topMenu)for(c=0;c<b.topMenu.length;c++)d+=f.parseMenuItem(b.topMenu[c],g.toolbarItemTemplate);if(b.subMenu)for(c=0;c<b.subMenu.length;c++)e+=f.parseMenuItem(b.subMenu[c],g.subMenuItemTemplate);c=b.topMenu.length,""===d&&""===e?f.toolbar.style.display="none":(d+="<div class='expand-toolbar'>...</div>",c++,f.topMenu.innerHTML=d,f.subMenu.innerHTML=e,f.setIconWidth(c),a.addEventListener("resize",function(a){f.setIconWidth(c)}),f.expandTarget=f.toolbar.querySelector(g.expandTargetSelector),f.setupExpand(),f.bindCallBacks(b),f.bindAutoCollapse())},parseMenuItem:function(a,b){return b.replace("{{title}}",a.title).replace("{{url}}",a.url).replace("{{iconClass}}",a.iconClass)},setIconWidth:function(b){var c=this.settings,d=document.querySelector(c.topMenuItemSelector).clientWidth,e=a.innerWidth,f=Math.floor((e-b*d)/(2*b)/e*98),g=document.querySelectorAll(c.topMenuItemSelector),h=document.querySelector(c.topMenuItemSelector);for(b=0;b<g.length;b++)g[b].style.marginRight=f+"%",g[b].style.marginLeft=f+"%";h&&(h.style.marginRight=f+"%",h.style.marginLeft=f+"%")},bindCallBacks:function(a){var b,c=0,d=this;for(c=0;c<a.topMenu.length;c++)b=a.topMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback);for(c=0;c<a.subMenu.length;c++)b=a.subMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback)},buildTransitionValue:function(a){var b=this.settings;return a+" "+b.expandSpeed+"ms "+b.easing},setupToolbarElements:function(a,b){var c=this;c.toolbar=a,c.topMenu=c.toolbar.querySelector(b.topMenuSelector),c.subMenu=c.toolbar.querySelector(b.subMenuSelector)},applyTransitionEnd:function(){var a=this;a.toolbar.addEventListener(a.support.transitionEnd,function(b){a.transitionEnd(b)})},transitionEnd:function(a){this.toolbar.style[this.support.transition]=""},setupTouch:function(){var b=this;b.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",b.hasMouse="ontouchstart"in a&&"onmousedown"in a,b.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown"},setupExpand:function(){var a=this;a.setupTouch(),a.bindTapEvent(a.expandTarget,function(b){b.preventDefault(),a.expandToolbar()})},bindAutoCollapse:function(){var a=this,b=0,c=document.querySelectorAll(a.settings.topMenuItemSelector+", "+a.settings.subMenuSelector);for(b=0;b<c.length;b++)a.bindTapEvent(c[b],function(){a.expandToolbar(!0)})},bindTapEvent:function(a,b){var c=this;a&&(a.addEventListener(c.touchStart,function(a){b.call(c,a)}),c.hasMouse&&a.addEventListener("mousedown",function(a){b.call(c,a)}))},expandToolbar:function(a){var c,d,e=this,f=e.settings,g=e.toolbar;(a!==!0||g.expanded!==b&&g.expanded!==!1)&&(g.style[e.support.transition]=e.buildTransitionValue("height"),g.expanded?(g.style.height=f.minHeight+"px",g.expanded=!1):(c=e.topMenu!==b?e.topMenu.getBoundingClientRect():{height:"0px",width:"0px"},d=e.subMenu!==b?e.subMenu.getBoundingClientRect():{height:"0px",width:"0px"},g.style.height=c.height+d.height+"px",g.expanded=!0))},settings:{minHeight:35,minWidth:42,collapseOnSelect:!0,mainSelector:".toolbar",topMenuSelector:".toolbar-top-menu",subMenuSelector:".toolbar-sub-menu",expandTargetSelector:".expand-toolbar",topMenuItemSelector:".toolbar-item",menuItems:{topMenu:[],subMenu:[]},toolbarItemTemplate:"<div class='toolbar-item'><a href='{{url}}'><div class='toolbar-item-icon {{iconClass}}'></div><figcaption class='toolbar-caption'>{{title}}</figcaption></a></div>",subMenuItemTemplate:"<a href='{{url}}'><div class='toolbar-sub-menu-nav-item {{iconClass}}'>{{title}}</div></a>",expandSpeed:1e3,that:b,easing:"ease-in-out"}},c.fn.init.prototype=c.fn,a.toolbar=c}(window),function(a,b){"use strict";var c=function(a,b){if(!a)return a;if("string"==typeof a&&(a=document.querySelector(a),!a))return a;"length"in a&&(a=a[0]);var d=new c.fn.init;return d.options=d.settings=$.extend({},d.settings,b),d.target=a,d};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",options:{},target:b,isShown:!1,injectMarkup:function(a,b){var c=this;return new Promise(function(a,b){ve.bind({targetSelector:c.settings.modalTarget,templateName:"modaldialogTemplate",
data:{}}).then(function(){ve.bind({targetSelector:c.settings.modalBody,templateName:"newslettersignupTemplate",data:{}}).then(function(){a()})["catch"](function(){b()})})})},show:function(a,b){var c=this,d=$("body");return new Promise(function(e,f){localStorage.getItem(b)&&e(),c.timer=setTimeout(function(){c.injectMarkup().then(function(){var a=document.querySelector(".modal .close");a&&a.addEventListener("click",function(a){a.preventDefault(),c.hide()}),c.escape(),d.addClass(c.settings.openClass),c.isShown=!0,e()})},a)})},timer:b,hide:function(){var a=this,b=$("body"),c=$(".modal"),d=$(a.settings.modalTarget);clearTimeout(a.timer),c.on("transitionend",function(){d.html(""),b.removeClass(a.settings.openClass)}),c.removeClass("in")},escape:function(){var a=this;document.body.addEventListener("keyup",function(b){var c=b.keyCode||b.which||b.charCode||0;return b.preventDefault(),27===c&&a.hide(),!1})},TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150,settings:{modalTemplateName:"modaldialogTemplate",modalBody:".modal-content",modalTarget:".modal-target",closeBtn:".modal-header .close",openClass:"modal-open",backdrop:!0,keyboard:!0,show:!0}},c.fn.init.prototype=c.fn,a.modal=c}(window),function(a,b){"use strict";var c={selector:"[role='progressbar']",show:function(){var a=document.querySelector(this.selector);a&&(a.setAttribute("aria-busy","true"),a.classList.add("show"),a.classList.remove("hide"))},hide:function(){var a=document.querySelector(this.selector);a&&(a.setAttribute("aria-busy","false"),a.classList.add("hide"),a.classList.remove("show"))}};return a.preloader=c}(window),function(a,b){"use strict";var c=function(a,b){if(!a)return a;if("string"==typeof a&&(a=document.querySelector(a),!a))return a;"length"in a&&(a=a[0]);var d=new c.fn.init,e=d.settings=$.extend({},d.settings,b);return d.support=$.buildVendorNames(),d.support.transitionEnd=d.eventNames[d.support.transition]||null,d.setuppopuppromoElements(a,e),d.applyTransitionEnd(),d.setpopuppromoMenu(e.menuItems),d};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",popuppromo:b,topMenu:b,subMenu:b,expandTarget:b,hasMouse:"",touchType:"",touchStart:"",div:b,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},setpopuppromoMenu:function(b){var c=0,d="",e="",f=this,g=f.settings;if(f.expandpopuppromo(!0),f.topMenu.innerHTML="",f.subMenu.innerHTML="",b.topMenu)for(c=0;c<b.topMenu.length;c++)d+=f.parseMenuItem(b.topMenu[c],g.popuppromoItemTemplate);if(b.subMenu)for(c=0;c<b.subMenu.length;c++)e+=f.parseMenuItem(b.subMenu[c],g.subMenuItemTemplate);c=b.topMenu.length,""===d&&""===e?f.popuppromo.style.display="none":(d+="<div class='expand-popuppromo'>...</div>",c++,f.topMenu.innerHTML=d,f.subMenu.innerHTML=e,f.setIconWidth(c),f.setOrientation(),a.addEventListener("resize",function(a){f.setIconWidth(c),f.setOrientation()}),f.expandTarget=f.popuppromo.querySelector(g.expandTargetSelector),f.setupExpand(),f.bindCallBacks(b),f.bindAutoCollapse())},parseMenuItem:function(a,b){return b.replace("{{title}}",a.title).replace("{{url}}",a.url).replace("{{iconClass}}",a.iconClass)},setIconWidth:function(b){var c=this.settings,d=document.querySelector(c.topMenuItemSelector).clientWidth,e=a.innerWidth,f=Math.floor((e-b*d)/(2*b)/e*98),g=document.querySelectorAll(c.topMenuItemSelector),h=document.querySelector(c.topMenuItemSelector);for(b=0;b<g.length;b++)g[b].style.marginRight=f+"%",g[b].style.marginLeft=f+"%";h&&(h.style.marginRight=f+"%",h.style.marginLeft=f+"%")},setOrientation:function(){a.innerWidth<a.innerHeight?this.popuppromo.orientation=portrait:this.popuppromo.orientation=landscape},bindCallBacks:function(a){var b,c=0,d=this;for(c=0;c<a.topMenu.length;c++)b=a.topMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback);for(c=0;c<a.subMenu.length;c++)b=a.subMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback)},buildTransitionValue:function(a){var b=this.settings;return a+" "+b.expandSpeed+"ms "+b.easing},setuppopuppromoElements:function(a,b){var c=this;c.popuppromo=a,c.topMenu=c.popuppromo.querySelector(b.topMenuSelector),c.subMenu=c.popuppromo.querySelector(b.subMenuSelector)},applyTransitionEnd:function(){var a=this;a.popuppromo.addEventListener(a.support.transitionEnd,function(b){a.transitionEnd(b)})},transitionEnd:function(a){this.popuppromo.style[this.support.transition]=""},setupTouch:function(){var b=this;b.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",b.hasMouse="ontouchstart"in a&&"onmousedown"in a,b.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown"},setupExpand:function(){var a=this;a.setupTouch(),a.bindTapEvent(a.expandTarget,function(b){b.preventDefault(),a.expandpopuppromo()})},bindAutoCollapse:function(){var a=this,b=0,c=document.querySelectorAll(a.settings.topMenuItemSelector+", "+a.settings.subMenuSelector);for(b=0;b<c.length;b++)a.bindTapEvent(c[b],function(){a.expandpopuppromo(!0)})},bindTapEvent:function(a,b){var c=this;a&&(a.addEventListener(c.touchStart,function(a){b.call(c,a)}),c.hasMouse&&a.addEventListener("mousedown",function(a){b.call(c,a)}))},expandpopuppromo:function(a){var c,d,e=this,f=e.settings,g=e.popuppromo;(a!==!0||g.expanded!==b&&g.expanded!==!1)&&(g.orientation===portrait?g.style[e.support.transition]=e.buildTransitionValue("height"):g.style[e.support.transition]=e.buildTransitionValue("width"),g.expanded?(g.orientation===portrait?g.style.height=f.minHeight+"px":g.style.width=f.minWidth+"px",g.expanded=!1):(c=e.topMenu!==b?e.topMenu.getBoundingClientRect():{height:"0px",width:"0px"},d=e.subMenu!==b?e.subMenu.getBoundingClientRect():{height:"0px",width:"0px"},e.popuppromo.orientation===portrait?g.style.height=c.height+d.height+"px":f.menuItems.subMenu.length>0&&(g.style.width=f.expandWidth+"px"),g.expanded=!0))},settings:{minHeight:35,minWidth:42,expandWidth:200,collapseOnSelect:!0,mainSelector:".popuppromo",topMenuSelector:".popuppromo-top-menu",subMenuSelector:".popuppromo-sub-menu",expandTargetSelector:".expand-popuppromo",topMenuItemSelector:".popuppromo-item",expandSpeed:1e3,that:b,easing:"ease-in-out"}},c.fn.init.prototype=c.fn,a.popuppromo=c}(window),function(a){"use strict";var b=Class.extend({init:function(a){this.appKey=a.appKey||this.appKey,this.cache=a.cache||this.cache,this.API_ROOT=a.API_ROOT||this.API_ROOT},version:"0.0.1.0",cache:a,API_ROOT:"",ttl:3e4,injectors:[],createInjector:function(a){injectors.push(a)},status:{0:"notOnitialized",1:"connectionEstablished",2:"received",3:"processing",4:"success"},appKey:"spa-app-",authTokenKey:"userToken",getCachedObject:function(a){return this.getCachedData(a,!0)},getCachedData:function(a,b){var c,d=this,e="getItem";return new Promise(function(f,g){b&&(e="getObject"),d.cache&&(c=d.cache[e](d.appKey+a.cacheKey),c&&f(c)),a.cache=!!d.cache,a.type=a.type||"json",d.getData(a).then(function(a){f(a)})["catch"](function(a){g(a)})})},FORM_ENCODED:"application/x-www-form-urlencoded",JSON_ENCODED:"application/x-json",HTML_ENCODED:"text/html",buildAjaxDataQueryString:function(a){var b,c="";for(b in a)c+=""===c?b+"="+a[b]:"&"+b+"="+a[b];return c},defaultHeaders:{contentType:"application/x-www-form-urlencoded",accept:{"*":"text/javascript, text/html, application/json, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},getAcceptHeader:function(a){return a&&""!==a?this.defaultHeaders.accept[a]:this.defaultHeaders.accept["*"]},ajaxSettings:{cache:!1,cacheTTL:6e4,dataType:"json",method:"get",type:"json",contentType:"application/json",success:function(a){}},failsuccess:function(a){a.responseText&&console.error(JSON.stringify(a.responseText))},doAJAX:function(a){var b=this,c=new XMLHttpRequest,d=new Promise(function(d,e){a=$.extend({},b.ajaxSettings,a),a.onload&&(c.onload=a.onload),a.onerror&&(c.onerror=a.onerror),a.url.indexOf("http://")<0&&a.url.indexOf("https://")<0&&(a.url=b.API_ROOT+a.url),c.open(a.method,a.url),c.setRequestHeader("Content-Type",a.contentType),c.setRequestHeader("Accept",b.getAcceptHeader(a.type)),localStorage.getItem(b.authTokenKey)&&c.setRequestHeader("Authorization","Bearer "+localStorage.getItem(b.authTokenKey)),c.onreadystatechange=function(f){if(4!=c.readyState&&a[c.readyState]&&a[c.readyState](),4===c.readyState){if(c.status>=200&&c.status<300)try{var g=this.responseText;switch(a.cache&&b.cache.setObject(a.cacheKey,g,a.cacheTTL),a.type){case"json":g&&""!==g&&(g=JSON.parse(g))}d(g)}catch(f){e(Error(f.message))}c.status>=200&&c.status<207&&a.error&&e(Error(this.responseText))}},a.data?"json"===a.dataType?c.send(JSON.stringify(a.data)):c.send(a.data):c.send()});return d},getData:function(a){var b=$.extend({},this.ajaxSettings,a);return"jsonp"===a.type&&(delete b.contentType,delete b.dataType),this.doAJAX(b)},patchData:function(a){return a.method="PATCH",this.doAJAX(a)},patchJSON:function(a){return a.dataType="json",this.patchData(a)},postData:function(a){return a.method="POST",this.doAJAX(a)},postJSON:function(a){return a.dataType="json",this.postData(a)},putData:function(a){return a.method="PUT",this.doAJAX(a)},putJSON:function(a){return a.dataType="json",this.putData(a)},deleteData:function(a){return a.method="DELETE",this.doAJAX(a)},getItem:function(a,b,c){return this.getCachedObject({url:a,cacheKey:this.appKey+"-"+b+"-"+c})}});return window.AJAX=b}(),FastFurniture.fn.categories=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){var b=this;fastFurnitureData.getCategories(b.renderHomeCategories)},renderHomeCategories:function(a){ve.bind({targetSelector:".categories-grid",templateName:"categoryListItem",data:{categories:a}})}}),FastFurniture.fn.category=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){document.querySelector(".spa-view-category .view-title-large").innerHTML=a.paramValues.Name,fastFurnitureData.getCategoryProducts(a.paramValues.Name,function(a){ve.bind({targetSelector:".products-wrapper",templateName:"productGridItem",data:{products:a},callback:function(){var b=0,c=document.querySelector(".products-wrapper"),d=window.innerWidth,e=0,f=0;720>d?(e=150,f=150):d>720&&1024>d?(e=220,f=420):(e=320,f=420),b=a.length%2===1?(a.length-1)*e/2:a.length*e/2,c.style.width=f+b+"px"}})})}}),FastFurniture.fn.forgotemail=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){}}),FastFurniture.fn.forgotpassword=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){}}),FastFurniture.fn.home=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){var b=this;fastFurnitureData.getHomeCategories(function(a){b.renderHomeCategories(a)})},renderHomeCategories:function(a){ve.bind({targetSelector:".products-wrapper",templateName:"categoryGridItem",data:{categories:a}})}}),FastFurniture.fn.login=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){var b,c,d=document.querySelector(".btn-login");auth.isAuthenticated()||($(".login-form").show(),d.addEventListener("click",function(a){return a.preventDefault(),b=document.querySelector(".username"),c=document.querySelector(".password"),auth.login(b.value,c.value,function(a){console.log(a)}),!1}))},syntaxHighlight:function(a){return"string"!=typeof a&&(a=JSON.stringify(a,void 0,2)),a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(a){var b="number";return/^"/.test(a)?b=/:$/.test(a)?"key":"string":/true|false/.test(a)?b="boolean":/null/.test(a)&&(b="null"),'<span class="'+b+'">'+a+"</span>"})}}),FastFurniture.fn.NotFound=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){}}),FastFurniture.fn.product=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){this.getProduct(a.paramValues.Name)},getProduct:function(a){var b=this;fastFurnitureData.getProduct(a,function(a){try{ve.bind({targetSelector:".product-details",templateName:"productDetails",data:a,callback:function(){document.querySelector(".add-to-cart").addEventListener("click",b.addProductToCart)}}),ve.bind({targetSelector:".product-details-related-products",templateName:"relatedProduct",data:a})}catch(c){console.log("error ",c)}})},addProductToCart:function(a){}}),FastFurniture.fn.search=FastFurniture.fn.fastFurnitureController.extend({onload:function(a){var b=this,c=document.getElementById("searchTerm");c.value="",document.furnitureSearch.addEventListener("keypress",function(a){b.searchKeyCheck(a)}),c.addEventListener("focus",b.manageSearchIcons),c.addEventListener("blur",b.manageSearchIcons),b.searchData(a.paramValues.term)},searchData:function(a){var b=a||document.getElementById("searchTerm").value;""!==b&&fastFurnitureData.searchProducts(b,function(a){a?(document.querySelector(".search-result-list").innerHTML="",document.querySelector(".y-scroller-wrapper").scrollLeft=0,ve.bind({targetSelector:".search-result-list",templateName:"searchReultItems",data:{products:a}})):document.querySelector(".search-result-list").innerHTML="<p>Sorry No Results</p>"})},searchKeyCheck:function(a){a=a||event;var b=this,c=a.target||a.srcElement,d=/textarea/i.test(c.tagName),e=a.keyCode||a.which||a.charCode||0,f=d||13!==e;return f?!1:(b.manageSearchIcons(),13===e&&(a.preventDefault(),b.searchData()),!1)},manageSearchIcons:function(a){var b=document.getElementById("searchTerm"),c=document.querySelector(".search-input-icon");""!=b.value?(b.style.width="100%",c.style.display="none"):(c.style.display="inline-block",b.style.width="")}});